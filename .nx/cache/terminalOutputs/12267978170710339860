[1m[2mDetermining test suites to run...[22m[22m[999D[K

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        0 s[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        0 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        1 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        2 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[0m[7m[1m[31m FAIL [39m[22m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m

[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        2 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A  [1mâ— [22mTest suite failed to run

    [96mapps/api/src/services/auth.service.spec.ts[0m:[93m16[0m:[93m9[0m - [91merror[0m[90m TS2739: [0mType '{ id: number; email: string; password: string; firstName: string; lastName: string; role: Role.ADMIN; organizationId: number; createdAt: Date; updatedAt: Date; }' is missing the following properties from type 'User': organization, tasks, auditLogs

    [7m16[0m   const mockUser: User = {
    [7m  [0m [91m        ~~~~~~~~[0m


[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        2 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/services/[22m[1mauth.service.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m0 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        2 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, 1 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        2 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, 1 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        3 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[0m[7m[1m[32m PASS [39m[22m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, 1 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        3 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[0m[7m[1m[32m PASS [39m[22m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m

[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1mtasks.controller.spec.ts[22m
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/controllers/[22m[1maudit.controller.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, 1 of 4 total
[1mTests:       [22m0 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        3 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[32m8 passed[39m[22m, 8 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        3 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[32m8 passed[39m[22m, 8 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[31m2 failed[39m[22m, [1m[32m8 passed[39m[22m, 10 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A
[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[31m3 failed[39m[22m, [1m[32m8 passed[39m[22m, 11 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[0m[7m[1m[31m FAIL [39m[22m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[31m3 failed[39m[22m, [1m[32m8 passed[39m[22m, 11 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[1m[31m  [1mâ— [22m[1mAPI Endpoints (e2e) â€º authenticates and allows Owner to create tasks[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m401[39m
[2m[22m
[2m    [0m [90m 80 |[39m     })[33m;[39m[22m
[2m     [90m 81 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 82 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m[22m
[2m     [90m    |[39m                             [31m[1m^[22m[2m[39m[22m
[2m     [90m 83 |[39m     [36mconst[39m payload [33m=[39m [36mawait[39m response[33m.[39mjson()[33m;[39m[22m
[2m     [90m 84 |[39m     expect(payload[33m.[39mtitle)[33m.[39mtoBe([32m'Owner task'[39m)[33m;[39m[22m
[2m     [90m 85 |[39m   })[33m;[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/api.e2e.spec.ts[39m[0m[2m:82:29)[22m[2m[22m

[1m[31m  [1mâ— [22m[1mAPI Endpoints (e2e) â€º prevents Viewer from creating tasks[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m403[39m
    Received: [31m401[39m
[2m[22m
[2m    [0m [90m 102 |[39m     })[33m;[39m[22m
[2m     [90m 103 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 104 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m403[39m)[33m;[39m[22m
[2m     [90m     |[39m                             [31m[1m^[22m[2m[39m[22m
[2m     [90m 105 |[39m   })[33m;[39m[22m
[2m     [90m 106 |[39m[22m
[2m     [90m 107 |[39m   it([32m'scopes tasks to Viewer organization'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/api.e2e.spec.ts[39m[0m[2m:104:29)[22m[2m[22m

[1m[31m  [1mâ— [22m[1mAPI Endpoints (e2e) â€º scopes tasks to Viewer organization[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m401[39m
[2m[22m
[2m    [0m [90m 114 |[39m     })[33m;[39m[22m
[2m     [90m 115 |[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 116 |[39m     expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m[22m
[2m     [90m     |[39m                             [31m[1m^[22m[2m[39m[22m
[2m     [90m 117 |[39m     [36mconst[39m tasks [33m=[39m [36mawait[39m response[33m.[39mjson()[33m;[39m[22m
[2m     [90m 118 |[39m     expect(tasks[33m.[39mevery((task[33m:[39m [33mTask[39m) [33m=>[39m task[33m.[39morganizationId [33m===[39m [35m2[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m[22m
[2m     [90m 119 |[39m   })[33m;[39m[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/api.e2e.spec.ts[39m[0m[2m:116:29)[22m[2m[22m

[1m[31m  [1mâ— [22m[1mAPI Endpoints (e2e) â€º allows Owner but not Viewer to view audit logs[39m[22m

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m401[39m
[2m[22m
[2m    [0m [90m 128 |[39m       }[33m,[39m[22m
[2m     [90m 129 |[39m     })[33m;[39m[22m
[2m    [31m[1m>[22m[2m[39m[90m 130 |[39m     expect(ownerResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m[22m
[2m     [90m     |[39m                                  [31m[1m^[22m[2m[39m[22m
[2m     [90m 131 |[39m[22m
[2m     [90m 132 |[39m     [36mconst[39m viewerResponse [33m=[39m [36mawait[39m fetch([32m`${baseUrl}/audit-log`[39m[33m,[39m {[22m
[2m     [90m 133 |[39m       headers[33m:[39m {[0m[22m
[2m[22m
[2m      [2mat Object.<anonymous> ([22m[2m[0m[36msrc/api.e2e.spec.ts[39m[0m[2m:130:34)[22m[2m[22m


[0m[7m[33m[1m RUNS [22m[39m[27m[0m [0m[7m[37m api [39m[27m[0m [2mapps/api/src/[22m[1mapi.e2e.spec.ts[22m

[1mTest Suites: [22m[1m[31m1 failed[39m[22m, [1m[32m2 passed[39m[22m, 3 of 4 total
[1mTests:       [22m[1m[31m3 failed[39m[22m, [1m[32m8 passed[39m[22m, 11 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A

[1mTest Suites: [22m[1m[31m2 failed[39m[22m, [1m[32m2 passed[39m[22m, 4 total
[1mTests:       [22m[1m[31m4 failed[39m[22m, [1m[32m8 passed[39m[22m, 12 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4 s[K[1A[K[1A[K[1A[K[1A[K[1A[999D[K[1mTest Suites: [22m[1m[31m2 failed[39m[22m, [1m[32m2 passed[39m[22m, 4 total
[1mTests:       [22m[1m[31m4 failed[39m[22m, [1m[32m8 passed[39m[22m, 12 total
[1mSnapshots:   [22m0 total
[1mTime:[22m        4.615 s
[2mRan all test suites[22m[2m.[22m
